<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Suivi Tournoi</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header><h1>Vue Globale</h1></header>
    <div id="liste" class="card"></div>

    <script type="module">
        import { db, ref, onValue } from './js/database.js';
        onValue(ref(db, 'tournoi/listeMatchs'), (snapshot) => {
            const m = snapshot.val();
            const res = document.getElementById('liste');
            if (!m) return res.innerHTML = "Aucun tournoi en cours.";

            let html = "";
            let tourActuel = 0;

            m.forEach(x => {
                if (x.tour !== tourActuel) {
                    tourActuel = x.tour;
                    html += `<div class="tour-header">TOUR ${tourActuel} ${x.exempte ? `<span class="repos"> - Repos: ${x.exempte}</span>` : ''}</div>`;
                }
                html += `
                    <div class="match-item ${x.termine ? 'fini' : ''}">
                        <span><b>T${x.terrain}</b> | ${x.t1} vs ${x.t2}</span>
                        <span class="duree">${x.duree}</span>
                    </div>`;
            });
            res.innerHTML = html;
        });
    </script>
</body>
</html>
