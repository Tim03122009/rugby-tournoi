<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Arbitrage</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header><h1>Terrains</h1></header>
    <div id="app"></div>
    <script type="module">
        import { db, ref, onValue, update } from './js/database.js';
        onValue(ref(db, 'tournoi/listeMatchs'), (snapshot) => {
            const matchs = snapshot.val();
            const container = document.getElementById('app');
            container.innerHTML = "";
            if(!matchs) return;

            matchs.forEach((m, idx) => {
                if(!m.termine) {
                    const div = document.createElement('div');
                    div.className = "card";
                    div.innerHTML = `
                        <h3>Terrain ${m.terrain} - Tour ${m.tour}</h3>
                        <h2>${m.t1} vs ${m.t2}</h2>
                        <button class="btn-main" onclick="window.fin(${idx})">MATCH TERMINÃ‰</button>
                    `;
                    container.appendChild(div);
                }
            });
            window.fin = (i) => update(ref(db, `tournoi/listeMatchs/${i}`), { termine: true });
        });
    </script>
</body>
</html>
